<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
  How to (not) lock yourself into architectural drawbacks, or, Microservice architecture as the reification of Pi-Calculus

    </title>
    
    <link rel="stylesheet" href="/css/main.min.b0ac2a435097757bc0f52ca79b98b87531ff99fa1b4c88d169395513962577d9.css" /><meta property="og:title" content="How to (not) lock yourself into architectural drawbacks, or, Microservice architecture as the reification of Pi-Calculus" />
<meta property="og:description" content="Reification: the treatment of something abstract as a material or concrete thing, as in the following lines from Matthew Arnold‚Äôs poem ‚ÄúDover Beach‚Äù: (Britannica 2018)
/The Sea of Faith
Was once, too, at the full, and round earth‚Äôs shore
Lay like the folds of a bright girdle furled./
  The microservice architecture(MA) has taken a deep hold in the collective imagination of the software engineering community since at least 20141." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ebellani.github.io/blog/2024/microservices-as-reification/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2024-05-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-05-04T00:00:00+00:00" />

</head>
  <body><nav>
  <img
    src="/img/triquetra.png"
    alt="put your logo here"
    width="128"
    height="128"
  />
  <h1>Eduardo&#39;s blog</h1>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/blog">Blog</a></li>
  </ul>
</nav>
<main>
  <h2>How to (not) lock yourself into architectural drawbacks, or, Microservice architecture as the reification of Pi-Calculus
    <small>
      <time>May 4, 2024</time>
    by Eduardo Bellani


    </small>
  </h2><blockquote>
<p><em>Reification</em>: the treatment of something abstract as a material or
concrete thing, as in the following lines from Matthew Arnold‚Äôs poem
‚ÄúDover Beach‚Äù: (<a href="#citeproc_bib_item_2">Britannica 2018</a>)</p>
<div class="verse">
<p>/The Sea of Faith<br />
Was once, too, at the full, and round earth‚Äôs shore<br />
Lay like the folds of a bright girdle furled./<br /></p>
</div>
</blockquote>
<p>The microservice architecture(MA) has taken a deep hold in the
collective imagination of the software engineering community since at
least 2014<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. This has happened despite serious and well documented
<a href="#drawbacks">drawbacks</a>.</p>
<p>Such combination calls for an explanation. A sketch of such explanation
is my intent here, starting with what MA is, at bottom. At a later date
I intend to provide a history of how it came to be a dominant
architecture on our industry.</p>
<p>My position is that MA is a reification(<a href="#citeproc_bib_item_2">Britannica 2018</a>)
of abstract processes as defined by the Pi-Calculus (PC). Why do I think
of that? Let&rsquo;s start by defining things.</p>
<h2 id="definitions">Definitions</h2>
<p>PC is a model of message-based concurrent computation and its essential
features are(<a href="#citeproc_bib_item_4">Pierce 1997</a>):</p>
<blockquote>
<ul>
<li>focusing on interaction via communication rather than shared
variables,</li>
<li>describing concurrent systems using a small set of primitive operators
and</li>
<li>on deriving useful algebraic laws for manipulating expressions written
using these operators.</li>
</ul>
</blockquote>
<p>More concretely:</p>
<blockquote>
<p>&hellip;
<br />
œÄ-calculus lets you represent processes, parallel composition of
processes, synchronous communication between processes through channels,
creation of fresh channels, replication of processes, and nondeterminism
<br />
&hellip;
<br />
A <strong>process</strong> is an abstraction of an independent thread of control. A
<strong>channel</strong> is an abstraction of the communication link between two
processes. Processes interact with each other by sending and receiving
<strong>messages</strong> over channels.
(<a href="#citeproc_bib_item_5">Wing 2002</a>)</p>
</blockquote>
<p>Here is the best definition of the MA that I know of:</p>
<blockquote>
<p>The microservice architecture pattern structures the system as a
collection of independently deployable services that communicate only
via messages through service interfaces. (<a href="#citeproc_bib_item_1">Bass et al. 2021</a>)</p>
</blockquote>
<h2 id="how-are-they-mapped">How are they mapped?</h2>
<p>So here is PC is mapped to MA:</p>
<ol>
<li><strong>Processes</strong> are Services(binaries loaded into memory),</li>
<li><strong>Channels</strong> are either queues or some form of APIs (RPC or REST),</li>
<li><strong>Messages</strong> are network calls,</li>
<li>The avoidance of <strong>shared variables</strong> as an avoidance of a shared DBMS.</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>The reader might well ask, so what? Isn&rsquo;t that a good thing? Well, no,
it&rsquo;s a very bad thing. Why?</p>
<p>Because once you mistake a formal entity such as the PC with a material
one such as the MA, you lock yourself out of possibilities and in
specific <a href="#drawbacks">drawbacks</a> that might not exist in other ways to implement the
PC.</p>
<p>Let me illustrate the point here with a metaphor:</p>
<p>Say you think the formal entity called <code>Boat</code> can only be implemented by
<code>Yacht</code>. You now are locked into the design choices of that concrete
instantiation of the <code>Boat</code> form. <code>Transatlantic</code> or <code>Canoe</code> are not
possible for you.</p>
<p>Coming back to the case at hand, here are some examples of how you could
implement the pi-calculus without MA:</p>
<ul>
<li>Use a language/runtime that supports it, such as Erlang/ERT, SML/NJ or F#/.net.</li>
<li>Use a framework such as Akka.</li>
<li>Use a DBMS where several applications share the same DBMS but you use
permissions and views to manage access and have logical independence.</li>
</ul>
<h2 id="drawbacks">Appendix: The Drawbacks</h2>
<blockquote>
<ul>
<li>It hurts performance. The overhead of serializing data and sending it
across the network is increasingly becoming a bottleneck. When
developers over-split their applications, these overheads compound.</li>
<li>It hurts correctness. It is extremely challenging to reason about the
interactions between every deployed version of every microservice. In
a case study of over 100 catastrophic failures of eight widely used
systems, two-thirds of failures were caused by the interactions
between multiple versions of a system.</li>
<li>It is hard to manage. Rather than having a single binary to build,
test, and deploy, developers have to manage ùëõ different binaries, each
on their own release schedule. Running end-to-end tests with a local
instance of the application becomes an engineering feat.</li>
<li>It freezes APIs. Once a microservice establishes an API, it becomes
hard to change without breaking the other services that consume the
API. Legacy APIs linger around, and new APIs are patched on top.<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></li>
<li>It slows down application development. When making changes that affect
multiple microservices, developers cannot implement and deploy the
changes atomically. They have to carefully plan how to introduce the
change across ùëõ microservices with their own release schedules.</li>
</ul>
<p>(<a href="#citeproc_bib_item_3">Ghemawat et al. 2023</a>)</p>
</blockquote>
<figure><img src="/ox-hugo/Cath%c3%a9drale_St_Joseph_de_Phnom_Penh.jpg"
         alt="Figure 1: Cathedral of Phnom Penhl, destroyed shortly after by the Khmer Rouge. The Ministry of Posts and Telecommunications now stands on the site of the former cathedral" width="30%"/><figcaption>
            <p><span class="figure-number">Figure 1: </span>Cathedral of Phnom Penhl, destroyed shortly after by the Khmer Rouge. The Ministry of Posts and Telecommunications now stands on the site of the former cathedral</p>
        </figcaption>
</figure>

<h2 id="references">References</h2>
<style>.csl-entry{text-indent: -1.5em; margin-left: 1.5em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>Bass, L., P. Clements, R. Kazman, and an O‚ÄôReilly Media Company Safari. 2021. <i>Software Architecture in Practice, 4th Edition</i>. Sei Series in Software Engineering. Addison-Wesley Professional.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_2"></a>Britannica, The Editors of Encyclopaedia. 2018. ‚ÄúReification.‚Äù In <i>Encyclopedia Britannica</i>. <a href="https://www.britannica.com/topic/reification">https://www.britannica.com/topic/reification</a>.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_3"></a>Ghemawat, Sanjay, Robert Grandl, Srdjan Petrovic, Michael Whittaker, Parveen Patel, Ivan Posva, and Amin Vahdat. 2023. ‚ÄúTowards Modern Development of Cloud Applications.‚Äù In <i>Proceedings of the 19th Workshop on Hot Topics in Operating Systems</i>, 110‚Äì17. Hotos ‚Äô23. Providence, RI, USA: Association for Computing Machinery. <a href="https://doi.org/10.1145/3593856.3595909">https://doi.org/10.1145/3593856.3595909</a>.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_4"></a>Pierce, Benjamin C. 1997. ‚ÄúFoundational Calculi for Programming Languages.‚Äù In <i>The Computer Science and Engineering Handbook</i>, edited by Allen B. Tucker, 2190‚Äì2207. CRC Press. <a href="http://dblp.uni-trier.de/db/books/collections/tucker97.html#Pierce97">http://dblp.uni-trier.de/db/books/collections/tucker97.html#Pierce97</a>.</div>
  <div class="csl-entry"><a id="citeproc_bib_item_5"></a>Wing, Jeannette M. 2002. ‚ÄúFaq on $\Pi$-Calculus.‚Äù <a href="https://www.cs.cmu.edu/~wing/publications/Wing02a.pdf">https://www.cs.cmu.edu/~wing/publications/Wing02a.pdf</a>.</div>
</div>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://trends.google.com/trends/explore?date=all&amp;geo=US&amp;q=microservices">https://trends.google.com/trends/explore?date=all&amp;geo=US&amp;q=microservices</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>In a certain sense, all externally facing APIs face this. Microservices just make this problem worse by making everything <code>external</code> and not part of the same checkable runtime.&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>



   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   





<footer>
  <p>Feel free to send me an email: ebellani -at- gmail -dot- com</p>
  <p>
    Fingerprint: 48C50C6F1139C5160AA0DC2BC54D00BC4DF7CA7C
  </p>
</footer>

      </main>
    </main>
  </body>
</html>
