<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
  Theory in practice: Why Treating Metadata as Relations Pays Off

    </title>
    
    <link rel="stylesheet" href="/css/main.min.b0ac2a435097757bc0f52ca79b98b87531ff99fa1b4c88d169395513962577d9.css" /><meta property="og:title" content="Theory in practice: Why Treating Metadata as Relations Pays Off" />
<meta property="og:description" content="Underpinning relational databases you find a very powerful principle: all your information should be represented as attributes drawn from domains in relations(Pascal 2020). This is Codd’s Information Principle #1. This principle isn’t just fluffy theory: it can lead to very concrete wins in how we design, query, and maintain systems.1
A practical case: Dependencies for Security Policies This is clearly a metadata question: Which other database objects does this view depend on?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ebellani.github.io/blog/2025/theory-in-practice-why-treating-metadata-as-relations-pays-off/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2025-04-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2025-04-14T00:00:00+00:00" />

</head>
  <body><nav>
  <img
    src="/img/triquetra.png"
    alt="put your logo here"
    width="128"
    height="128"
  />
  <h1>Eduardo&#39;s blog</h1>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/blog">Blog</a></li>
  </ul>
</nav>
<main>
  <h2>Theory in practice: Why Treating Metadata as Relations Pays Off
    <small>
      <time>April 14, 2025</time>
    by Eduardo Bellani


    </small>
  </h2><p>Underpinning relational databases you find a very powerful principle:
all your information should be represented as attributes drawn from
domains in
relations(<a href="#citeproc_bib_item_1">Pascal 2020</a>). This is Codd’s
Information Principle #1. This principle isn’t just fluffy theory: it
can lead to very concrete wins in how we design, query, and maintain
systems.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<h2 id="a-practical-case-dependencies-for-security-policies">A practical case: Dependencies for Security Policies</h2>
<p>This is clearly a metadata question: Which other database objects does
this view depend on? In many environments, answering that might involve
using external tools or writing scripts in another language. But in
PostgreSQL, you can answer it with a simple query <strong>because</strong> PostgreSQL
respects Codd’s principle and exposes metadata as part of its relational
structure.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">source_schema</span><span class="p">.</span><span class="n">nspname</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">source_object_schema_name</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">source_object</span><span class="p">.</span><span class="n">relname</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">source_object_name</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">dependent_schema</span><span class="p">.</span><span class="n">nspname</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dependent_object_schema_name</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">dependent</span><span class="p">.</span><span class="n">relname</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dependent_object_name</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">dependent</span><span class="p">.</span><span class="n">relkind</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">dependent_object_type</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">from</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">pg_rewrite</span><span class="w"> </span><span class="n">rw</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">join</span><span class="w"> </span><span class="n">pg_class</span><span class="w">     </span><span class="n">source_object</span><span class="w">      </span><span class="k">on</span><span class="w"> </span><span class="n">rw</span><span class="p">.</span><span class="n">ev_class</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">source_object</span><span class="p">.</span><span class="n">oid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">join</span><span class="w"> </span><span class="n">pg_depend</span><span class="w">    </span><span class="n">dep</span><span class="w">              </span><span class="k">on</span><span class="w"> </span><span class="n">dep</span><span class="p">.</span><span class="n">objid</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">rw</span><span class="p">.</span><span class="n">oid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">join</span><span class="w"> </span><span class="n">pg_class</span><span class="w">     </span><span class="n">dependent</span><span class="w">        </span><span class="k">on</span><span class="w"> </span><span class="n">dep</span><span class="p">.</span><span class="n">refobjid</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">dependent</span><span class="p">.</span><span class="n">oid</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">join</span><span class="w"> </span><span class="n">pg_namespace</span><span class="w"> </span><span class="n">source_schema</span><span class="w">    </span><span class="k">on</span><span class="w"> </span><span class="n">source_schema</span><span class="p">.</span><span class="n">oid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">source_object</span><span class="p">.</span><span class="n">relnamespace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="k">join</span><span class="w"> </span><span class="n">pg_namespace</span><span class="w"> </span><span class="n">dependent_schema</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">dependent_schema</span><span class="p">.</span><span class="n">oid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dependent</span><span class="p">.</span><span class="n">relnamespace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="k">where</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">(</span><span class="n">dependent_schema</span><span class="p">.</span><span class="n">nspname</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">source_schema</span><span class="p">.</span><span class="n">nspname</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">dependent</span><span class="p">.</span><span class="n">relname</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="n">source_object</span><span class="p">.</span><span class="n">relname</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="k">and</span><span class="w"> </span><span class="n">source_object</span><span class="p">.</span><span class="n">relname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;MY_VIEW&#39;</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">source_schema</span><span class="p">.</span><span class="n">nspname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;MY_SCHEMA&#39;</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><div class="src-block-caption">
  <span class="src-block-number">Code Snippet 1:</span>
  Retrieves all objects (tables, views, etc.) that MY_SCHEMA.MY_VIEW depends on — across schemas and object types
</div>
<h2 id="conclusion">Conclusion</h2>
<p>When your system represents metadata relationally, you can reason about
it with the same tools you use for business data. No context-switching,
no ETL jobs, no external tools. Just your relationally inspired SQL.</p>
<p>This aligns with the foundational ideas behind relational databases and
shows that following sound principles can yield practical advantages.</p>
<h2 id="references">References</h2>
<style>.csl-entry{text-indent: -1.5em; margin-left: 1.5em;}</style><div class="csl-bib-body">
  <div class="csl-entry"><a id="citeproc_bib_item_1"></a>Pascal, Fabian. 2020. “Understanding Codd’s 12 Rules for Rdbms (Accessed on 2025-04-14).” <a href="https://www.dbdebunk.com/2020/10/understanding-codds-12-rules-for-rdbms.html">https://www.dbdebunk.com/2020/10/understanding-codds-12-rules-for-rdbms.html</a>.</div>
</div>
<figure><img src="/ox-hugo/The%20Cathedral%20of%20the%20Archangel%20Michael%20in%20Bronnitsy.jpg"
         alt="Figure 1: The Cathedral of the Archangel Michael in Bronnitsy underwent a relatively mild transformation: It was used as a state book archive - but the &amp;ldquo;book of books,&amp;rdquo; the Bible, surely couldn&amp;rsquo;t be found there."/><figcaption>
            <p><span class="figure-number">Figure 1: </span>The Cathedral of the Archangel Michael in Bronnitsy underwent a relatively mild transformation: It was used as a state book archive - but the &ldquo;book of books,&rdquo; the Bible, surely couldn&rsquo;t be found there.</p>
        </figcaption>
</figure>

<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Recently I had a conversation on linkedin: <a href="https://www.linkedin.com/feed/update/urn:li:ugcPost:7316402764975075328?commentUrn=urn%3Ali%3Acomment%3A%28ugcPost%3A7316402764975075328%2C7316457084038930432%29&amp;dashCommentUrn=urn%3Ali%3Afsd_comment%3A%287316457084038930432%2Curn%3Ali%3AugcPost%3A7316402764975075328%29">https://www.linkedin.com/feed/update/urn:li:ugcPost:7316402764975075328?commentUrn=urn%3Ali%3Acomment%3A%28ugcPost%3A7316402764975075328%2C7316457084038930432%29&amp;dashCommentUrn=urn%3Ali%3Afsd_comment%3A%287316457084038930432%2Curn%3Ali%3AugcPost%3A7316402764975075328%29</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>



   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   





<footer>
  <p>Feel free to send me an email: ebellani -at- gmail -dot- com</p>
  <p>
    PGP Key Fingerprint: 48C50C6F1139C5160AA0DC2BC54D00BC4DF7CA7C
  </p>
</footer>

      </main>
    </main>
  </body>
</html>
